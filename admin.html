<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>ç®¡ç†æ¨¡å¼</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { font-family:"Noto Sans TC","å¾®è»Ÿæ­£é»‘é«”"; background:#e6f0ff; margin:0; }
header { background:#1976d2; color:white; text-align:center; padding:20px; }
.admin-box { max-width:900px; margin:30px auto; padding:20px; background:white; border-radius:10px; box-shadow:0 5px 15px rgba(0,0,0,0.1);}
input, select { padding:8px; margin:5px 0; width:calc(100% - 16px); }
button { padding:10px; margin:5px 0; border:none; border-radius:5px; background:#1976d2; color:white; cursor:pointer;}
button:hover { background:#1565c0; }
.event-card { padding:10px; margin:10px 0; border:1px solid #ccc; border-radius:5px; background:#f0f4ff;}
.nav-btn { position:fixed; top:20px; right:20px; padding:10px 15px; background:#1565c0; color:white; border:none; border-radius:5px; cursor:pointer;}
</style>
</head>
<body>

<header><h1>ç®¡ç†æ¨¡å¼ï½œæ´»å‹•ç®¡ç†</h1></header>

<button class="nav-btn" onclick="backHome()">ğŸ  å›é¦–é </button>

<div class="admin-box">
<h2>æ–°å¢æ´»å‹•</h2>
<input id="newTitle" placeholder="æ¨™é¡Œ">
<input id="newLocation" placeholder="åœ°é»">
<input id="newLat" placeholder="ç·¯åº¦">
<input id="newLng" placeholder="ç¶“åº¦">
<input id="newDesc" placeholder="æè¿°">
<input id="newRoute" placeholder="å»ºè­°è·¯ç·š">
<select id="newRegion">
  <option value="åŒ—æµ·é“">åŒ—æµ·é“</option>
  <option value="æœ¬æ´²">æœ¬æ´²</option>
  <option value="ä¹å·å››åœ‹">ä¹å·å››åœ‹</option>
</select>
<button onclick="addEvent()">æ–°å¢</button>

<h2>æ´»å‹•åˆ—è¡¨</h2>
<div id="eventList"></div>
</div>

<script>
// æª¢æŸ¥ç™»å…¥
if(localStorage.getItem("admin")!=="true"){
  alert("è«‹å…ˆç™»å…¥ç®¡ç†è€…");
  window.location.href="index.html";
}

// å¾é¦–é äº‹ä»¶è¼‰å…¥ï¼ˆæ¨¡æ“¬è®€å–indexè³‡æ–™ï¼‰
let events = JSON.parse(localStorage.getItem("events")) || [
  {title:"æœ­å¹Œé›ªç¥­",location:"æœ­å¹Œ",lat:43.0618,lng:141.3545,desc:"å†¬å­£å¿…çœ‹é›ªé›•",route:"æœ­å¹Œç«™â†’å¤§é€šå…¬åœ’",region:"åŒ—æµ·é“"},
  {title:"äº¬éƒ½æ¸…æ°´å¯º",location:"äº¬éƒ½",lat:35.0116,lng:135.7681,desc:"ä¸–ç•Œæ–‡åŒ–éºç”¢",route:"äº¬éƒ½ç«™â†’æ¸…æ°´å¯º",region:"æœ¬æ´²"}
];

function renderEvents(){
  const list=document.getElementById("eventList");
  list.innerHTML="";
  events.forEach((e,i)=>{
    const card=document.createElement("div");
    card.className="event-card";
    card.innerHTML=`
      <b>${e.title}</b> (${e.region}) <br>
      åœ°é»:${e.location} <br>
      æè¿°:${e.desc} <br>
      è·¯ç·š:${e.route} <br>
      <button onclick="editEvent(${i})">ç·¨è¼¯</button>
      <button onclick="deleteEvent(${i})">åˆªé™¤</button>
    `;
    list.appendChild(card);
  });
  localStorage.setItem("events",JSON.stringify(events));
}

function addEvent(){
  const e={
    title:document.getElementById("newTitle").value,
    location:document.getElementById("newLocation").value,
    lat:parseFloat(document.getElementById("newLat").value),
    lng:parseFloat(document.getElementById("newLng").value),
    desc:document.getElementById("newDesc").value,
    route:document.getElementById("newRoute").value,
    region:document.getElementById("newRegion").value
  };
  events.push(e);
  renderEvents();
}

function editEvent(i){
  const e=events[i];
  const newTitle=prompt("ä¿®æ”¹æ¨™é¡Œ",e.title); if(newTitle)e.title=newTitle;
  const newLoc=prompt("ä¿®æ”¹åœ°é»",e.location); if(newLoc)e.location=newLoc;
  renderEvents();
}

function deleteEvent(i){
  if(confirm("ç¢ºå®šåˆªé™¤ï¼Ÿ")) events.splice(i,1);
  renderEvents();
}

function backHome(){
  localStorage.setItem("admin","true"); // ä¿æŒç®¡ç†æ¨¡å¼
  window.location.href="index.html";
}

renderEvents();
</script>
</body>
</html>
